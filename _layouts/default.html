
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>{{ page.title }}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.welcomments.io/welcomments.css" />
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/bokeh.css">
  </head>
  <body>
    <div class="bokeh">
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
      <div class="light"></div>
    </div>
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12 col-md-10 col-lg-8">
          <h1>{{ page.title }}</h1>
          <section class="content">
            {{ content }}
          </section>
          <img src="assets/GL-Bild.jpg" alt=""/>
          <section>
            {% include welcomments/comments.html website_id = "kPSa1dtJjunT1hnDjj3E7PQ2S" %}
          </section>
        </div>
      </div>
    </div>
    <div class="snow-container"></div>
    <script type="text/javascript">
      document.addEventListener("DOMContentLoaded", function () {
        console.log("Snow is being initialized...");
        const snowContainer = document.querySelector(".snow-container");

        const particlesPerThousandPixels = 0.1;
        const fallSpeed = 0.5;
        const pauseWhenNotActive = true;
        const maxSnowflakes = 200;
        const snowflakes = [];

        let snowflakeInterval;
        let isTabActive = true;

        function resetSnowflake(snowflake) {
          const size = Math.random() * 5 + 1;
          const viewportWidth = window.innerWidth - size; // Adjust for snowflake size
          const viewportHeight = window.innerHeight;

          snowflake.style.width = `${size}px`;
          snowflake.style.height = `${size}px`;
          snowflake.style.left = `${Math.random() * viewportWidth}px`; // Constrain within viewport width
          snowflake.style.top = `-${size}px`;

          const animationDuration = (Math.random() * 3 + 2) / fallSpeed;
          snowflake.style.animationDuration = `${animationDuration}s`;
          snowflake.style.animationTimingFunction = "linear";
          snowflake.style.animationName =
                  Math.random() < 0.5 ? "fall" : "diagonal-fall";

          setTimeout(() => {
            if (parseInt(snowflake.style.top, 10) < viewportHeight) {
              resetSnowflake(snowflake);
            } else {
              snowflake.remove(); // Remove when it goes off the bottom edge
            }
          }, animationDuration * 1000);
        }

        function createSnowflake() {
          if (snowflakes.length < maxSnowflakes) {
            const snowflake = document.createElement("div");
            snowflake.classList.add("snowflake");
            snowflakes.push(snowflake);
            snowContainer.appendChild(snowflake);
            resetSnowflake(snowflake);
          }
        }

        function generateSnowflakes() {
          const numberOfParticles =
                  Math.ceil((window.innerWidth * window.innerHeight) / 1000) *
                  particlesPerThousandPixels;
          const interval = 5000 / numberOfParticles;

          clearInterval(snowflakeInterval);
          snowflakeInterval = setInterval(() => {
            if (isTabActive && snowflakes.length < maxSnowflakes) {
              requestAnimationFrame(createSnowflake);
            }
          }, interval);
        }

        function handleVisibilityChange() {
          if (!pauseWhenNotActive) return;

          isTabActive = !document.hidden;
          if (isTabActive) {
            generateSnowflakes();
          } else {
            clearInterval(snowflakeInterval);
          }
        }

        generateSnowflakes();

        window.addEventListener("resize", () => {
          clearInterval(snowflakeInterval);
          setTimeout(generateSnowflakes, 1000);
        });

        document.addEventListener("visibilitychange", handleVisibilityChange);
      });

    </script>
  </body>
</html>
